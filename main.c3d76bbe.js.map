{"version":3,"sources":["scripts/main.js"],"names":["board","startButton","document","querySelector","startMessage","loseMessage","winMessage","gameScore","gameStarted","score","rows","columns","moveLeft","moveRight","moveUp","moveDown","setGame","innerText","r","c","fieldCell","createElement","classList","add","id","updateFieldCell","append","cellValue","value","resetGame","remove","getElementById","hasEmptyFieldCell","addRandomCell","randomRowIndex","Math","floor","random","randomColumnIndex","randomFieldCell","toString","randomCellValue","arraysAreEqual","arr1","arr2","length","i","clearZeroes","row","filter","Boolean","slide","newRow","push","slideLeft","slideLeftAndRight","slideRight","slideUp","slideUpAndDown","slideDown","direction","isAnyCellMoved","prevRow","reverse","gameIsOver","hasNoEmptyCells","move","isWinner","window","onload","addEventListener","e","code","contains","innerHTML"],"mappings":"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","file":"main.c3d76bbe.js","sourceRoot":"..\\src","sourcesContent":["/* eslint-disable max-len */\n'use strict';\n\nconst startButton = document.querySelector('.start'); // 37, 72-73, 124-125\nconst startMessage = document.querySelector('.message-start');\nconst loseMessage = document.querySelector('.message-lose');\nconst winMessage = document.querySelector('.message-win');\nconst gameScore = document.querySelector('.game-score');\n\nlet gameStarted = false;\nlet score = 0;\nconst rows = 4;\nconst columns = 4;\nlet board;\n\nconst moveLeft = 'ArrowLeft';\nconst moveRight = 'ArrowRight';\nconst moveUp = 'ArrowUp';\nconst moveDown = 'ArrowDown';\n\nwindow.onload = function() {\n  setGame();\n};\n\nfunction setGame() {\n  board = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  score = 0;\n  gameScore.innerText = score;\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      const fieldCell = document.createElement('div');\n\n      fieldCell.classList.add('field-cell');\n      fieldCell.id = `${r}-${c}`;\n\n      const cellValue = board[r][c];\n\n      updateFieldCell(fieldCell, cellValue);\n      document.querySelector('.game-field').append(fieldCell);\n    }\n  }\n\n  gameStarted = false;\n};\n\nfunction updateFieldCell(fieldCell, cellValue) {\n  fieldCell.innerText = '';\n  fieldCell.classList.value = '';\n  fieldCell.classList.add('field-cell');\n\n  if (cellValue > 0) {\n    fieldCell.innerText = cellValue;\n    fieldCell.classList.add(`field-cell--${cellValue}`);\n  }\n};\n\ndocument.addEventListener('keydown', (e) => {\n  if (!gameStarted) {\n    return;\n  }\n\n  switch (e.code) {\n    case moveLeft:\n      return slideLeft();\n    case moveRight:\n      return slideRight();\n    case moveUp:\n      return slideUp();\n    case moveDown:\n      return slideDown();\n  }\n\n  gameScore.innerText = score;\n\n  if (isWinner()) {\n    winMessage.classList.remove('hidden');\n  }\n});\n\nstartButton.addEventListener('click', () => {\n  if (!startButton.classList.contains('start')) {\n    startButton.classList.remove('restart');\n    startButton.classList.add('start');\n    startButton.innerText = 'Start';\n    gameStarted = false;\n    resetGame();\n  } else {\n    startButton.classList.remove('start');\n    startButton.classList.add('restart');\n    startButton.innerHTML = 'Restart';\n    startMessage.classList.add('hidden');\n    gameStarted = true;\n    addRandomCell();\n    addRandomCell();\n  }\n});\n\nfunction resetGame() {\n  score = 0;\n  document.querySelector('.game-score').innerText = score;\n  winMessage.classList.add('hidden');\n  loseMessage.classList.add('hidden');\n  startMessage.classList.remove('hidden');\n\n  board = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      const fieldCell = document.getElementById(`${r}-${c}`);\n\n      updateFieldCell(fieldCell, 0);\n    }\n  }\n}\n\nfunction hasEmptyFieldCell() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (board[r][c] === 0) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction addRandomCell() {\n  if (!hasEmptyFieldCell()) {\n    return;\n  }\n\n  while (true) {\n    const randomRowIndex = Math.floor(Math.random() * rows);\n    const randomColumnIndex = Math.floor(Math.random() * columns);\n\n    if (board[randomRowIndex][randomColumnIndex] === 0) {\n      const randomFieldCell = document.getElementById(randomRowIndex.toString() + '-' + randomColumnIndex.toString());\n      const randomCellValue = Math.random() >= 0.1 ? 2 : 4;\n\n      board[randomRowIndex][randomColumnIndex] = randomCellValue;\n      randomFieldCell.innerText = randomCellValue;\n      randomFieldCell.classList.add(`field-cell--${randomCellValue}`);\n      break;\n    }\n  }\n}\n\nfunction arraysAreEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < arr1.length; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction clearZeroes(row) {\n  return row.filter(Boolean);\n}\n\nfunction slide(row) {\n  let newRow = clearZeroes(row);\n\n  for (let i = 0; i < newRow.length - 1; i++) {\n    if (newRow[i] === newRow[i + 1]) {\n      newRow[i] *= 2;\n      newRow[i + 1] = 0;\n      score += newRow[i];\n\n      gameScore.innerText = score;\n    }\n  }\n\n  newRow = clearZeroes(newRow);\n\n  while (newRow.length < columns) {\n    newRow.push(0);\n  }\n\n  return newRow;\n}\n\nfunction slideLeft() {\n  slideLeftAndRight('left');\n}\n\nfunction slideRight() {\n  slideLeftAndRight('right');\n}\n\nfunction slideUp() {\n  slideUpAndDown('up');\n}\n\nfunction slideDown() {\n  slideUpAndDown('down');\n}\n\nfunction slideLeftAndRight(direction) {\n  let isAnyCellMoved = false;\n\n  for (let r = 0; r < rows; r++) {\n    let row = board[r];\n    const prevRow = [...row];\n\n    if (direction === 'right') {\n      row.reverse();\n    }\n\n    row = slide(row);\n\n    if (direction === 'right') {\n      row.reverse();\n    }\n    board[r] = row;\n\n    if (!arraysAreEqual(prevRow, row)) {\n      isAnyCellMoved = true;\n    }\n\n    for (let c = 0; c < columns; c++) {\n      const fieldCell = document.getElementById(`${r}-${c}`);\n      const cellValue = board[r][c];\n\n      updateFieldCell(fieldCell, cellValue);\n    }\n  }\n\n  if (isAnyCellMoved) {\n    addRandomCell();\n  }\n\n  if (gameIsOver()) {\n    loseMessage.classList.remove('hidden');\n  }\n}\n\nfunction slideUpAndDown(direction) {\n  let isAnyCellMoved = false;\n\n  for (let c = 0; c < columns; c++) {\n    let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n    const prevRow = [...row];\n\n    if (direction === 'down') {\n      row.reverse();\n    }\n    row = slide(row);\n\n    if (direction === 'down') {\n      row.reverse();\n    }\n\n    if (!arraysAreEqual(prevRow, row)) {\n      isAnyCellMoved = true;\n    }\n\n    for (let r = 0; r < columns; r++) {\n      board[r][c] = row[r];\n\n      const fieldCell = document.getElementById(`${r}-${c}`);\n      const cellValue = board[r][c];\n\n      updateFieldCell(fieldCell, cellValue);\n    }\n  }\n\n  if (isAnyCellMoved) {\n    addRandomCell();\n  }\n\n  if (gameIsOver()) {\n    loseMessage.classList.remove('hidden');\n  }\n}\n\nfunction gameIsOver() {\n  const hasNoEmptyCells = !hasEmptyFieldCell();\n  let move = true;\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (c > 0 && board[r][c] === board[r][c - 1]) {\n        move = false;\n        break;\n      }\n\n      if (c < columns - 1 && board[r][c] === board[r][c + 1]) {\n        move = false;\n        break;\n      }\n\n      if (r < rows - 1 && board[r][c] === board[r + 1][c]) {\n        move = false;\n        break;\n      }\n\n      if (r > 0 && board[r][c] === board[r - 1][c]) {\n        move = false;\n        break;\n      }\n    }\n  }\n\n  return move && hasNoEmptyCells;\n}\n\nfunction isWinner() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (board[r][c] === 2048) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n"]}